package {{txtConfigPackage}};

import java.net.URI;

import org.springframework.cache.annotation.EnableCaching;
import org.springframework.cache.jcache.JCacheCacheManager;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.io.ClassPathResource;

import jakarta.cache.CacheManager;
import jakarta.cache.Caching;
import jakarta.cache.spi.CachingProvider;

/**
 * Ehcache Configuration for Spring Framework 6.x with JCache (JSR-107)
 * 
 * Requirements:
 * - Spring Framework 6.x
 * - JDK 17+
 * - Ehcache 3.10.8+ (jakarta classifier)
 * - jakarta.cache-api 3.1.1+ (JCache/JSR-107)
 */
@Configuration
@EnableCaching
public class {{txtFileName}} {

  @Bean
  public org.springframework.cache.CacheManager cacheManager() throws Exception {
    return new JCacheCacheManager(jCacheCacheManager());
  }

  @Bean
  public CacheManager jCacheCacheManager() throws Exception {
    CachingProvider cachingProvider = Caching.getCachingProvider("org.ehcache.jsr107.EhcacheCachingProvider");
    
    // Load ehcache.xml configuration from classpath
    URI configUri = new ClassPathResource("{{txtConfigLocation}}").getURI();
    
    return cachingProvider.getCacheManager(configUri, cachingProvider.getDefaultClassLoader());
  }

  /*
   * pom.xml에 다음 라이브러리 추가 필요:
   * 
   * <dependency>
   *   <groupId>org.ehcache</groupId>
   *   <artifactId>ehcache</artifactId>
   *   <version>3.10.8</version>
   *   <classifier>jakarta</classifier>
   * </dependency>
   * 
   * <dependency>
   *   <groupId>jakarta.cache</groupId>
   *   <artifactId>jakarta.cache-api</artifactId>
   *   <version>3.1.1</version>
   * </dependency>
   * 
   * <dependency>
   *   <groupId>org.springframework</groupId>
   *   <artifactId>spring-context-support</artifactId>
   * </dependency>
   * 
   * Note: ehcache.xml 파일은 Ehcache 3.x 형식이어야 합니다.
   * ({{txtConfigLocation}} 경로에 위치)
   */
}
